(this.webpackJsonpreactmedia=this.webpackJsonpreactmedia||[]).push([[0],{145:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},146:function(e,t,a){e.exports=a(283)},151:function(e,t,a){},164:function(e,t){},166:function(e,t){},180:function(e,t){},182:function(e,t){},210:function(e,t){},212:function(e,t){},213:function(e,t){},219:function(e,t){},221:function(e,t){},239:function(e,t){},242:function(e,t){},258:function(e,t){},261:function(e,t){},283:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(23),o=a.n(l),c=(a(151),a(32)),s=a(142),m=a.n(s),u=a(143),i=a(5),d={loading:!1,signupError:null,loginError:null},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING":return Object(i.a)(Object(i.a)({},e),{},{loading:!0});case"STOP_LOADING":return Object(i.a)(Object(i.a)({},e),{},{loading:!1});case"LOGINERROR":return Object(i.a)(Object(i.a)({},e),{},{loading:!1,loginError:t.payload});case"SIGNUPERROR":return Object(i.a)(Object(i.a)({},e),{},{loading:!1,signupError:t.payload});default:return e}},g={loading:!1,userFeeds:[],userFeed:[],comments:[]},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING":return Object(i.a)(Object(i.a)({},e),{},{loading:!0});case"STOP_LOADING":return Object(i.a)(Object(i.a)({},e),{},{loading:!1});case"FETCH_SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{loading:!1,userFeeds:t.payload});case"FETCH_ONE_SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{loading:!1,userFeed:t.payload});case"FETCH_COMMENTS_SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{loading:!1,comments:t.payload});default:return e}},b={loading:!1,authError:null,user:[]},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING":return Object(i.a)(Object(i.a)({},e),{},{loading:!0});case"STOP_LOADING":return Object(i.a)(Object(i.a)({},e),{},{loading:!1});case"FETCH_USER_SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{user:[t.payload]});default:return e}},x=Object(c.c)({user:f,news:p,profile:h}),E=a(8),y=a(17),w=a(145),N=a.n(w),v=a(49),O=a.n(v);a(156),a(159),a(284);O.a.initializeApp({apiKey:"AIzaSyDK56Cidly4enjHGD1ZEjYPm8YrnRPjQS0",authDomain:"react-social-media-3293d.firebaseapp.com",databaseURL:"https://react-social-media-3293d.firebaseio.com",projectId:"react-social-media-3293d",storageBucket:"react-social-media-3293d.appspot.com",messagingSenderId:"214449524061",appId:"1:214449524061:web:da187624d7d42a31d86cb4"});var I=O.a.auth(),j=O.a.storage(),S=O.a.firestore(),C=a(81),F=a.n(C),k=a(15),A=function(e){return function(t){t({type:"LOADING"}),I.createUserWithEmailAndPassword(e.email,e.password).then((function(a){!function(e,t,a){var n=t.photo[0];j.ref("/users/".concat(e.user.uid,"/profile.jpg")).put(n,{contentType:"image/jpeg"}).then((function(e){return e.ref.getDownloadURL()})).then((function(a){return S.collection("users").doc(e.user.uid).set({email:t.email,name:t.username,DOB:t.DOB,profileImage:a,userId:e.user.uid,joined:(new Date).toDateString()}),e.user.updateProfile({displayName:t.username,photoURL:a})})).then((function(){return e.user.getIdToken()})).then((function(t){var a=F.a.sign({user:e.user},t);localStorage.setItem("token",a)})).then((function(){a({type:"STOP_LOADING"}),k.b.success("Signed up successfully",{onClose:function(){return window.location.href="/"}})})).catch((function(e){console.log(e)}))}(a,e,t)})).catch((function(e){return t({type:"STOP_LOADING"}),t({type:"SIGNUPERROR",payload:e.message}),k.b.error(e.message)}))}},D=function(e){return function(t){t({type:"LOADING"}),I.signInWithEmailAndPassword(e.email,e.password).then((function(e){!function(e,t){e.user.getIdToken().then((function(t){var a=F.a.sign({user:e.user},t);localStorage.setItem("token",a)})).then((function(){k.b.success("Signed in successfully",{onClose:function(){return window.location.href="/"}})})).then((function(){t({type:"STOP_LOADING"})})).catch((function(e){console.log(e)}))}(e,t)})).catch((function(e){t({type:"STOP_LOADING"}),t({type:"LOGINERROR",payload:e.message}),k.b.error(e.message)}))}},L=a(14),G=a(24),U=a.n(G),R=Object(E.b)(null,(function(e){return{signout:function(){return e(void I.signOut().then((function(){localStorage.removeItem("token")})).then((function(){window.location.href="/"})).catch((function(e){console.log(e)})))}}}))((function(e){var t,a=e.signout,l=Object(n.useState)(!1),o=Object(y.a)(l,2),c=o[0],s=o[1],m=localStorage.getItem("token");return m&&(t=U()(m)),r.a.createElement("header",{className:"bg-gray-900 sm:flex sm:justify-between sm:items-center sm:px-4 sm:py-3"},r.a.createElement("div",{className:"flex items-center justify-between px-4 py-3 sm:p-0"},r.a.createElement("div",null,r.a.createElement(L.b,{to:"/",className:"flex items-center"}," ",r.a.createElement("img",{className:"h-8",src:N.a,alt:"react logo"}),r.a.createElement("span",{className:"text-white"},"Media"))),r.a.createElement("div",{className:"sm:hidden"},r.a.createElement("button",{type:"button",className:"block text-gray-500 hover:text-white focus:text-white focus:outline-none",onClick:function(){s(!c)}},r.a.createElement("svg",{className:"h-6 w-6 fill-current",viewBox:"0 0 24 24"},c?r.a.createElement("path",{fillRule:"evenodd",d:"M18.278 16.864a1 1 0 0 1-1.414 1.414l-4.829-4.828-4.828 4.828a1 1 0 0 1-1.414-1.414l4.828-4.829-4.828-4.828a1 1 0 0 1 1.414-1.414l4.829 4.828 4.828-4.828a1 1 0 1 1 1.414 1.414l-4.828 4.829 4.828 4.828z"}):r.a.createElement("path",{fillRule:"evenodd",d:"M4 5h16a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z"}))))),r.a.createElement("nav",{className:c?"block px-2 pt-2 pb-4 sm:flex sm:p-0":"hidden px-2 pt-2 pb-4 sm:flex sm:p-0"},m?r.a.createElement(r.a.Fragment,null,r.a.createElement(L.b,{to:"/create",className:"mt-1 block px-2 py-1 text-white font-semibold rounded hover:bg-gray-800 sm:mt-0 sm:ml-2"},r.a.createElement("i",{className:"fas fa-plus"})),r.a.createElement(L.b,{to:"/profile/".concat(t.user.uid),className:"mt-1 block px-2 py-1 text-white font-semibold rounded hover:bg-gray-800 sm:mt-0 sm:ml-2"},"Welcome, ",t.user.displayName,"!"),r.a.createElement("button",{onClick:a,className:"mt-1 block px-2 py-1 text-white font-semibold rounded hover:bg-gray-800 sm:mt-0 sm:ml-2"},"Signout")):r.a.createElement(r.a.Fragment,null," ",r.a.createElement(L.b,{to:"/login",className:"block px-2 py-1 text-white font-semibold rounded hover:bg-gray-800"},"Login"),r.a.createElement(L.b,{to:"/signup",className:"mt-1 block px-2 py-1 text-white font-semibold rounded hover:bg-gray-800 sm:mt-0 sm:ml-2"},"Sign up"))))})),T=a(7),_=(a(281),function(e){var t=e.feeds;return r.a.createElement("div",{className:"flex justify-between mx-6 flex-wrap"},t.map((function(e,t){return r.a.createElement("div",{className:"max-w-sm w-full lg:max-w-full lg:flex mb-3 sm:mb-0 lg:mb-3",key:t},r.a.createElement("div",{className:"h-64 lg:h-auto lg:w-48 flex-none bg-cover bg-center rounded-t lg:rounded-t-none lg:rounded-l text-center overflow-hidden",style:{backgroundImage:"url(".concat(e.photo,")")},title:"Woman holding a mug"}),r.a.createElement("div",{className:"w-full h-auto border-r border-b border-l border-gray-400 lg:border-l-0 lg:border-t lg:border-gray-400 bg-white rounded-b lg:rounded-b-none lg:rounded-r p-4 flex flex-col justify-between leading-normal"},r.a.createElement("div",{className:"mb-8"},r.a.createElement("p",{className:"text-sm text-gray-600 flex items-center"},r.a.createElement(L.b,{to:"/newsfeed/".concat(e.feedId)},r.a.createElement("i",{className:"far fa-eye text-green-500"}),r.a.createElement("span",{className:"ml-2 text-green-500"},"View Feed"))),r.a.createElement("p",{className:"text-gray-700 text-base"},e.content)),r.a.createElement("div",{className:"flex items-center"},r.a.createElement("img",{className:"w-10 h-10 rounded-full mr-4",src:"".concat(e.userImage),alt:"Avatar of ".concat(e.username)}),r.a.createElement("div",{className:"text-sm"},r.a.createElement(L.b,{to:"/profile/".concat(e.userId),className:"text-green-500 leading-none"},e.username),r.a.createElement("p",{className:"text-gray-600"},e.createdAt," | ",r.a.createElement("span",null,e.commentCount," Comments"))))))})))}),B=a(48),P=a.n(B),q=function(){return r.a.createElement("span",{className:"text-green-500 opacity-75 my-32 mx-auto flex items-center justify-center"},r.a.createElement("i",{className:"fas fa-circle-notch fa-spin fa-5x"}))},z=Object(E.b)((function(e){return{isloading:e.news.loading,feeds:e.news.userFeeds}}),(function(e){return{getFeeds:function(){return e((function(e){e({type:"LOADING"});var t=[];S.collection("newsfeed").orderBy("createdAt","asc").get().then((function(a){return a.forEach((function(e){var a={feedId:e.id,userId:e.data().userId,photo:e.data().photo,userImage:e.data().userImage,username:e.data().username,content:e.data().content,commentCount:e.data().commentCount,createdAt:P()(e.data().createdAt).fromNow()};t.unshift(a)})),e({type:"FETCH_SUCCESS",payload:t})})).then((function(){e({type:"STOP_LOADING"})})).catch((function(e){console.log(e)}))}))}}}))((function(e){var t=e.getFeeds,a=e.isloading,l=e.feeds;return Object(n.useEffect)((function(){t()}),[t]),r.a.createElement(n.Fragment,null,l.length?r.a.createElement("h2",{className:"text-2xl ml-6 my-3"},"Latest Feeds"):r.a.createElement("h2",{className:"text-2xl ml-6 my-3"},"No Feeds"),a?r.a.createElement(q,null):r.a.createElement(_,{feeds:l}))})),M=a(25),H=Object(E.b)((function(e){return{isloading:e.user.loading,loginerror:e.user.loginError}}),(function(e){return{login:function(t){return e(D(t))}}}))((function(e){var t=e.isloading,a=e.login,l=e.loginerror,o=Object(M.a)({mode:"onBlur"}),c=o.register,s=o.handleSubmit,m=o.errors;return r.a.createElement(n.Fragment,null,t?r.a.createElement(q,null):r.a.createElement("div",{className:"bg-gray-200 h-screen"},r.a.createElement("div",{className:"max-w-3xl mx-auto px-4 py-4"},r.a.createElement("div",{className:"py-10"},r.a.createElement("div",null,r.a.createElement("h2",{className:"text-center text-4xl my-3"},"Login"),r.a.createElement("form",{onSubmit:s((function(e){a(e)}))},r.a.createElement("div",{className:"mb-5"},r.a.createElement("label",{htmlFor:"email",className:"font-bold mb-1 text-gray-700 block"},"Email"),r.a.createElement("input",{name:"email",type:"email",className:m.email?"w-full px-4 py-3 rounded-lg shadow-sm focus:outline-none focus:shadow-outline text-gray-600 font-medium border border-red-500":"w-full px-4 py-3 rounded-lg shadow-sm focus:outline-none focus:shadow-outline text-gray-600 font-medium",placeholder:"Enter your email address...",ref:c({required:{value:!0,message:"Field is required"},pattern:{value:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,message:"Email is not valid"}})}),m.email&&r.a.createElement("p",{className:"text-red-500 text-xs italic mt-2 ml-2"},m.email.message),l&&r.a.createElement("p",{className:"text-red-500 text-xs italic mt-2 ml-2"},l)),r.a.createElement("div",{className:"mb-5"},r.a.createElement("label",{htmlFor:"password",className:"font-bold mb-1 text-gray-700 block"},"Password"),r.a.createElement("input",{name:"password",type:"password",className:m.password?"w-full px-4 py-3 rounded-lg shadow-sm focus:outline-none focus:shadow-outline text-gray-600 font-medium border border-red-500":"w-full px-4 py-3 rounded-lg shadow-sm focus:outline-none focus:shadow-outline text-gray-600 font-medium",placeholder:"**********",ref:c({required:{value:!0,message:"Field is required"},minLength:{value:8,message:"Must be 8 characters long"}})}),m.password&&r.a.createElement("p",{className:"text-red-500 text-xs italic mt-2 ml-2"},m.password.message)),r.a.createElement("button",{className:"w-full bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded mt-4"},"Login")))))))})),Z=Object(E.b)((function(e){return{isloading:e.user.loading,singuperror:e.user.signupError}}),(function(e){return{signup:function(t){return e(A(t))}}}))((function(e){var t=e.isloading,a=e.signup,l=e.singuperror,o=Object(n.useState)(),c=Object(y.a)(o,2),s=c[0],m=c[1],u=Object(M.a)({mode:"onBlur"}),i=u.register,d=u.handleSubmit,f=u.errors;return r.a.createElement(n.Fragment,null,t?r.a.createElement(q,null):r.a.createElement("div",{className:"bg-gray-200"},r.a.createElement("div",{className:"max-w-3xl mx-auto px-4 py-4"},r.a.createElement("div",{className:"py-10"},r.a.createElement("div",null,r.a.createElement("div",{className:"mb-5 text-center"},r.a.createElement("div",{className:"mx-auto w-32 h-32 mb-2 border rounded-full relative bg-gray-100 mb-4 shadow-inset"},r.a.createElement("img",{id:"image",className:"w-full h-32 rounded-full",src:s,alt:"user"})),r.a.createElement("label",{htmlFor:"fileInput",type:"button",className:"cursor-pointer inine-flex justify-between items-center focus:outline-none border py-2 px-4 rounded-lg shadow-sm text-left text-gray-600 bg-white hover:bg-gray-100 font-medium"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"inline-flex flex-shrink-0 w-6 h-6 -mt-1 mr-1",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("rect",{x:"0",y:"0",width:"24",height:"24",stroke:"none"}),r.a.createElement("path",{d:"M5 7h1a2 2 0 0 0 2 -2a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1a2 2 0 0 0 2 2h1a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2"}),r.a.createElement("circle",{cx:"12",cy:"13",r:"3"})),"Browse Photo"),r.a.createElement("div",{className:"mx-auto w-48 text-gray-500 text-xs text-center mt-1"},"Click to add profile picture"),r.a.createElement("input",{name:"photo",id:"fileInput",className:"hidden",type:"file",ref:i({required:{value:!0,message:"Field is required"}}),onChange:function(e){var t=e.target.files[0],a=new FileReader;a.onload=function(e){m(e.target.result)},a.readAsDataURL(t)}}),f.photo&&r.a.createElement("p",{className:"text-red-500 text-xs italic mt-2 ml-2"},f.photo.message)),r.a.createElement("h2",{className:"text-center text-4xl my-3"},"Sign up"),r.a.createElement("form",{onSubmit:d((function(e){a(e)}))},r.a.createElement("div",{className:"mb-5"},r.a.createElement("label",{htmlFor:"username",className:"font-bold mb-1 text-gray-700 block"},"Username"),r.a.createElement("input",{name:"username",type:"text",className:f.username?"w-full px-4 py-3 rounded-lg shadow-sm focus:outline-none focus:shadow-outline text-gray-600 font-medium border border-red-500":"w-full px-4 py-3 rounded-lg shadow-sm focus:outline-none focus:shadow-outline text-gray-600 font-medium",placeholder:"Enter your username...",ref:i({required:{value:!0,message:"Field is required"},minLength:{value:3,message:"Must be at least 3 characters long"}})}),f.username&&r.a.createElement("p",{className:"text-red-500 text-xs italic mt-2 ml-2"},f.username.message)),r.a.createElement("div",{className:"mb-5"},r.a.createElement("label",{htmlFor:"email",className:"font-bold mb-1 text-gray-700 block"},"Email"),r.a.createElement("input",{name:"email",type:"email",className:f.email?"w-full px-4 py-3 rounded-lg shadow-sm focus:outline-none focus:shadow-outline text-gray-600 font-medium border border-red-500":"w-full px-4 py-3 rounded-lg shadow-sm focus:outline-none focus:shadow-outline text-gray-600 font-medium",placeholder:"Enter your email address...",ref:i({required:{value:!0,message:"Field is required"},pattern:{value:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,message:"Email is not valid"}})}),f.email&&r.a.createElement("p",{className:"text-red-500 text-xs italic mt-2 ml-2"},f.email.message),l&&r.a.createElement("p",{className:"text-red-500 text-xs italic mt-2 ml-2"},l)),r.a.createElement("div",{className:"mb-5"},r.a.createElement("label",{htmlFor:"DOB",className:"font-bold mb-1 text-gray-700 block"},"DOB"),r.a.createElement("input",{name:"DOB",type:"date",className:f.DOB?"w-full px-4 py-3 rounded-lg shadow-sm focus:outline-none focus:shadow-outline text-gray-600 font-medium border border-red-500":"w-full px-4 py-3 rounded-lg shadow-sm focus:outline-none focus:shadow-outline text-gray-600 font-medium",placeholder:"Enter your date of birth...",ref:i({required:{value:!0,message:"Field is required"}})}),f.DOB&&r.a.createElement("p",{className:"text-red-500 text-xs italic mt-2 ml-2"},f.DOB.message)),r.a.createElement("div",{className:"mb-5"},r.a.createElement("label",{htmlFor:"password",className:"font-bold mb-1 text-gray-700 block"},"Password"),r.a.createElement("input",{name:"password",type:"password",className:f.password?"w-full px-4 py-3 rounded-lg shadow-sm focus:outline-none focus:shadow-outline text-gray-600 font-medium border border-red-500":"w-full px-4 py-3 rounded-lg shadow-sm focus:outline-none focus:shadow-outline text-gray-600 font-medium",placeholder:"**********",ref:i({required:{value:!0,message:"Field is required"},minLength:{value:8,message:"Must be 8 characters long"}})}),f.password&&r.a.createElement("p",{className:"text-red-500 text-xs italic mt-2 ml-2"},f.password.message)),r.a.createElement("button",{className:"w-full bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded mt-4"},"Sign up")))))))})),W=Object(E.b)((function(e){return{isloading:e.news.loading}}),(function(e){return{createfeed:function(t,a,n){return e(function(e,t,a){return function(n){n({type:"LOADING"});var r={};j.ref("/users/".concat(a,"/profile.jpg")).getDownloadURL().then((function(n){r.username=t,r.userId=a,r.photo=e.image,r.userImage=n,r.content=e.content,r.commentCount=0,r.createdAt=(new Date).toString()})).then((function(){return S.collection("newsfeed").add(r)})).then((function(){k.b.success("Created feed successfully",{onClose:function(){return window.location.href="/"}})})).then((function(){n({type:"STOP_LOADING"})}))}}(t,a,n))}}}))((function(e){var t,a=e.createfeed,l=e.isloading,o=Object(M.a)({mode:"onBlur"}),c=o.register,s=o.handleSubmit,m=o.errors,u=U()(localStorage.getItem("token"));u&&(t=u);var i=t.user,d=i.displayName,f=i.uid;return r.a.createElement(n.Fragment,null,l?r.a.createElement(q,null):r.a.createElement("div",{className:"w-full max-w-xl mx-auto mt-8"},r.a.createElement("form",{className:"bg-gray-100 shadow-md rounded px-8 pt-6 pb-8 mb-4",onSubmit:s((function(e){a(e,d,f)}))},r.a.createElement("h3",{className:"mb-4 text-center text-2xl"},"Create Feed"),r.a.createElement("div",{className:"mb-4"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username"},"Image URL"),r.a.createElement("input",{name:"image",className:m.image?"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline border border-red-500":"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"image",type:"text",placeholder:"EX: Any image from unsplash",ref:c({required:{value:!0,message:"Field is required"}})}),m.image&&r.a.createElement("p",{className:"text-red-500 text-xs italic mt-2 ml-2"},m.image.message)),r.a.createElement("div",{className:"mb-6"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password"},"Content"),r.a.createElement("textarea",{name:"content",className:m.content?"shadow appearance-none rounded border w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline border border-red-500":"shadow appearance-none rounded border w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",rows:"8",id:"content",type:"text",placeholder:"Write Your Message...",ref:c({required:{value:!0,message:"Field is required"}})}),m.content&&r.a.createElement("p",{className:"text-red-500 text-xs italic mt-2 ml-2"},m.content.message)),r.a.createElement("div",{className:"flex items-center justify-end"},r.a.createElement("button",{className:"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit"},"Create")))))})),V=Object(E.b)(null,(function(e){return{createComment:function(t,a,n,r,l){return e(function(e,t,a,n,r){return function(l){l({type:"LOADING"});var o={};S.doc("/newsfeed/".concat(t)).get().then((function(e){return e.ref.update({commentCount:e.data().commentCount+1})})).then((function(){return o.feedId=t,o.body=e.body,o.displayName=a,o.photoURL=n,o.uid=r,o.createdAt=(new Date).toString(),S.collection("comments").add(o)})).then((function(){l({type:"STOP_LOADING"}),k.b.success("Comment Added!",{onClose:function(){return window.location.href="/newsfeed/".concat(t)}})})).catch((function(e){console.log(e)}))}}(t,a,n,r,l))}}}))((function(e){var t=e.createComment,a=e.feedId,n=Object(M.a)({mode:"onBlur"}),l=n.register,o=n.handleSubmit,c=n.errors,s=U()(localStorage.getItem("token")).user,m=s.displayName,u=s.uid,i=s.photoURL;return r.a.createElement("div",{className:"text-center py-2"},r.a.createElement("form",{className:"bg-white rounded-lg pt-2",onSubmit:o((function(e){t(e,a,m,i,u)}))},r.a.createElement("div",{className:"flex flex-wrap -mx-3 mb-6"},r.a.createElement("div",{className:"w-full md:w-full px-3 mb-2 mt-2"},r.a.createElement("textarea",{className:c.body?"bg-gray-100 rounded border border-gray-400 leading-normal resize-none w-full h-20 py-2 px-3 font-medium placeholder-gray-700 focus:outline-none focus:bg-white border border-red-500":"bg-gray-100 rounded border border-gray-400 leading-normal resize-none w-full h-20 py-2 px-3 font-medium placeholder-gray-700 focus:outline-none focus:bg-white",name:"body",placeholder:"Type Your Comment",ref:l({required:{value:!0,message:"Field cannot be empty"}})}),c.body&&r.a.createElement("p",{className:"text-red-500 text-xs italic mt-2"},c.body.message)),r.a.createElement("div",{className:"w-full md:w-full flex items-start md:w-full px-3"},r.a.createElement("div",{className:"-mr-1"},r.a.createElement("input",{type:"submit",className:"bg-green-500 text-white font-medium py-1 px-4 border border-gray-400 rounded-lg tracking-wide mr-1 hover:bg-green-600",value:"Post Comment"}))))))})),Y=Object(E.b)((function(e){return{isloading:e.news.loading,feed:e.news.userFeed,comments:e.news.comments}}),(function(e){return{getFeed:function(t){return e((a=t,function(e){e({type:"LOADING"});var t={},n=[],r=[];S.doc("/newsfeed/".concat(a)).get().then((function(e){return t.feedId=e.id,t.photo=e.data().photo,t.content=e.data().content,t.userId=e.data().userId,t.username=e.data().username,t.userImage=e.data().userImage,t.commentCount=e.data().commentCount,t.createdAt=P()(e.data().createdAt).fromNow(),n.push(t)})).then((function(){e({type:"FETCH_ONE_SUCCESS",payload:n})})).then((function(){return S.collection("comments").where("feedId","==",a).orderBy("createdAt","asc").get()})).then((function(t){t.forEach((function(e){return r.unshift(e.data())})),e({type:"FETCH_COMMENTS_SUCCESS",payload:r})})).then((function(){e({type:"STOP_LOADING"})})).catch((function(e){console.log(e)}))}));var a},deleteFeed:function(t){return e(function(e){return function(t){var a=S.batch();S.doc("/newsfeed/".concat(e)).get().then((function(e){return e.ref.delete()})).then((function(){return S.collection("comments").where("feedId","==",e).get()})).then((function(e){return e.forEach((function(e){a.delete(e.ref)})),a.commit()})).then((function(){k.b.success("Deleted successfully",{onClose:function(){return window.location.href="/"}})}))}}(t))}}}))((function(e){var t,a=e.match,l=e.getFeed,o=e.feed,c=e.isloading,s=e.comments,m=e.deleteFeed,u=localStorage.getItem("token");u&&(t=U()(u)),Object(n.useEffect)((function(){l(a.params.id)}),[a.params.id]);var i=function(){m(a.params.id)};return r.a.createElement(n.Fragment,null,c?r.a.createElement(q,null):r.a.createElement("div",{className:"flex flex-wrap h-screen mt-6"},r.a.createElement("div",{className:"w-full sm:w-1/2"},o.map((function(e,a){return r.a.createElement("div",{className:"max-w-xl mx-auto px-4 py-4 bg-white shadow-md rounded-lg",key:a},r.a.createElement("div",{className:"py-2 flex flex-row items-center justify-between"},r.a.createElement("div",{className:"flex flex-row items-center"},r.a.createElement("p",{href:"#",className:"flex flex-row items-center focus:outline-none focus:shadow-outline rounded-lg"},r.a.createElement("img",{className:"rounded-full h-8 w-8 object-cover",src:"".concat(e.userImage),alt:"".concat(e.userImage)}),r.a.createElement(L.b,{to:"/profile/".concat(e.userId),className:"ml-2 text-base text-green-500 font-medium"},e.username))),r.a.createElement("div",{className:"flex flex-row items-center"},r.a.createElement("p",{className:"text-xs font-semibold text-gray-500"},e.createdAt))),r.a.createElement("div",{className:"mt-2"},r.a.createElement("img",{className:"object-cover w-full rounded-lg",src:"".concat(e.photo),alt:""})),r.a.createElement("div",{className:"py-2 flex justify-between items-center"},r.a.createElement("p",{className:"leading-snug"},e.content),t&&t.user.uid===e.userId?r.a.createElement("button",{onClick:i,className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded"},"Delete Feed"):null))}))),r.a.createElement("div",{className:"w-full sm:w-1/2 px-6"},r.a.createElement("div",{className:"divide-y divide-gray-400"},t?r.a.createElement(V,{feedId:a.params.id}):r.a.createElement("div",{className:"flex items-center bg-teal-200 border border-teal-300 text-teal-500 pl-4 pr-8 py-3 rounded",role:"alert"},r.a.createElement("svg",{className:"h-6 w-6 text-teal mr-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r.a.createElement("path",{d:"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"})),r.a.createElement("span",{className:"block sm:inline"},"Login or signup to leave a comment")),r.a.createElement("div",{className:"py-2"},s.length?s.map((function(e,t){return r.a.createElement("div",{className:"flex bg-white shadow-lg rounded-lg mb-3",key:t},r.a.createElement("div",{className:"flex items-start px-4 py-6 w-full"},r.a.createElement("img",{className:"w-12 h-12 rounded-full object-cover mr-4 shadow",src:"".concat(e.photoURL),alt:"avatar"}),r.a.createElement("div",{className:"w-full"},r.a.createElement("div",{className:"flex items-center justify-between"},r.a.createElement("h2",{className:"text-lg font-semibold text-green-500"},r.a.createElement(L.b,{to:"/profile/".concat(e.uid)},e.displayName)),r.a.createElement("small",{className:"text-sm text-gray-700"},P()(e.createdAt).fromNow())),r.a.createElement("p",{className:"mt-2 text-gray-700 text-sm"},e.body))))})):r.a.createElement("p",null,"No comments"))))))})),J=Object(E.b)((function(e){return{user:e.profile.user,isloading:e.profile.loading}}),(function(e){return{getUser:function(t){return e((a=t,function(e){e({type:"LOADING"});var t={};S.doc("/users/".concat(a)).get().then((function(e){return console.log(e.data()),t.name=e.data().name,t.email=e.data().email,t.DOB=e.data().DOB,t.joined=e.data().joined,t.profileImage=e.data().profileImage,t.userId=e.data().userId,S.collection("newsfeed").where("userId","==",a).get()})).then((function(a){return t.feeds=[],a.forEach((function(e){t.feedId=e.id,t.feeds.unshift(e.data())})),e({type:"STOP_LOADING"}),e({type:"FETCH_USER_SUCCESS",payload:t})}))}));var a},updateuser:function(t){return e(function(e){var t=e.updateEmail;return function(e){e({type:"LOADING"});var a=I.currentUser;a.updateEmail(t).then((function(){return a.updateProfile({email:t})})).then((function(){return S.doc("/users/".concat(a.uid)).get()})).then((function(e){return e.ref.update({email:t})})).then((function(){k.b.success("Account updated",{onClose:function(){return window.location.href="/profile/".concat(a.uid)}})})).catch((function(e){k.b.error("There was an error updating your account"),console.log(e)}))}}(t))},deleteuser:function(t){return e(function(e){return function(t){t({type:"LOADING"});var a=S.batch();S.collection("users").doc("".concat(e)).delete().then((function(){return S.collection("newsfeed").where("userId","==",e).get()})).then((function(e){e.forEach((function(e){a.delete(e.ref)}))})).then((function(){return S.collection("comments").where("userId","==",e).get()})).then((function(e){e.forEach((function(e){return S.collection("newsfeed").doc("/".concat(e.data().feedId)).update({commentCount:0})}))})).then((function(){return S.collection("comments").where("userId","==",e).get()})).then((function(e){e.forEach((function(e){a.delete(e.ref)}))})).then((function(){return a.commit()})).then((function(){return j.ref("/users/".concat(e,"/profile.jpg")).delete()})).then((function(){return localStorage.removeItem("token")})).then((function(){return I.currentUser.delete()})).then((function(){k.b.info("Account removed",{onClose:function(){return window.location.href="/"}})})).catch((function(e){t({type:"STOP_LOADING"}),k.b.error("Error removing account"),console.log(e)}))}}(t))}}}))((function(e){var t,a=e.match,l=e.getUser,o=e.isloading,c=e.user,s=e.updateuser,m=e.deleteuser,u=Object(M.a)({mode:"onBlur"}),i=u.register,d=u.handleSubmit,f=u.errors,g=Object(n.useState)(!1),p=Object(y.a)(g,2),b=p[0],h=p[1],x=function(e){s(e)},E=a.params.id,w=localStorage.getItem("token");w&&(t=U()(w));var N=function(){m(E)};return Object(n.useEffect)((function(){l(E)}),[E]),r.a.createElement(n.Fragment,null,o?r.a.createElement(q,null):r.a.createElement(r.a.Fragment,null,c.map((function(e,a){return r.a.createElement(n.Fragment,{key:a},r.a.createElement("div",{className:"flex bg-gray-700 py-18 justify-center"},r.a.createElement("div",{className:"p-12 text-center max-w-2xl flex flex-wrap justify-center"},r.a.createElement("div",{className:"rounded-full h-24 w-24 bg-center bg-cover border-2 border-white",style:{backgroundImage:"url(".concat(e.profileImage,")")}}),r.a.createElement("div",{className:"w-full text-2xl font-semibold mt-4 text-green-500"},e.name,r.a.createElement("p",{className:"font-normal text-gray-100 text-sm"},"Joined ",e.joined)))),r.a.createElement("div",{className:"mx-6 mt-6 md:mx-32 divide-y divide-gray-200"},w&&t.user.uid===E?r.a.createElement(r.a.Fragment,null," ",r.a.createElement("div",{className:"text-center py-2"},r.a.createElement("h3",{className:"text-center text-2xl mb-4 font-semibold"},"About me"),r.a.createElement("form",{className:"w-full mb-6",onSubmit:d(x)},r.a.createElement("div",{className:"sm:flex justify-between"},r.a.createElement("div",{className:"mb-6"},r.a.createElement("div",{className:""},r.a.createElement("label",{className:"text-gray-600"},"Birthday"),r.a.createElement("input",{className:"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500 mt-2",id:"inline-full-name",type:"text",defaultValue:"".concat(e.DOB),disabled:!0}))),r.a.createElement("div",{className:"mb-6"},r.a.createElement("div",{className:""},r.a.createElement("label",{className:"text-gray-600"},"Email"),r.a.createElement("input",{name:"updateEmail",className:"bg-gray-200 appearance-none border-2 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-400 mt-2",id:"inline-username",type:"email",defaultValue:"".concat(e.email),placeholder:"Enter Email",ref:i({required:{value:!0,message:"Field is required"},pattern:{value:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,message:"Email is not valid"}})}),f.updateEmail&&r.a.createElement("p",{className:"text-red-500 text-xs italic mt-2 ml-2"},f.updateEmail.message)))),r.a.createElement("div",null,b?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",onClick:function(){return h(!1)}},r.a.createElement("div",{className:"relative w-auto my-6 mx-auto max-w-sm"},r.a.createElement("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none"},r.a.createElement("div",{className:"flex items-start justify-between p-5 border-b border-solid border-gray-300 rounded-t"},r.a.createElement("h3",{className:"text-3xl font-semibold"},"Delete Account"),r.a.createElement("button",{className:"p-1 ml-auto bg-transparent border-0 text-black opacity-5 float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:function(){return h(!1)}},r.a.createElement("span",{className:"bg-transparent text-black opacity-5 h-6 w-6 text-2xl block outline-none focus:outline-none"},"\xd7"))),r.a.createElement("div",{className:"relative p-6 flex-auto"},r.a.createElement("p",{className:"my-4 text-gray-600 text-lg leading-relaxed"},"Are you sure you want to remove this account, info will be erased forever!")),r.a.createElement("div",{className:"flex items-center justify-end p-6 border-t border-solid border-gray-300 rounded-b"},r.a.createElement("button",{className:"text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1",type:"button",style:{transition:"all .15s ease"},onClick:function(){return h(!1)}},"Close"),r.a.createElement("button",{className:"bg-green-500 text-white active:bg-green-600 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1",type:"button",style:{transition:"all .15s ease"},onClick:N},"Save"))))),r.a.createElement("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})):null,r.a.createElement("div",{className:"flex justify-between"},r.a.createElement("button",{className:"shadow bg-green-500 hover:bg-green-600 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded",type:"button"},"Update"),r.a.createElement("button",{className:"shadow bg-red-500 hover:bg-red-600 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded",type:"button",onClick:function(){return h(!0)}},"Delete Account")))))):null,r.a.createElement("div",{className:"py-2"},r.a.createElement("div",{className:"mt-8 flex flex-col justify-center"},r.a.createElement("h3",{className:"font-semibold text-2xl text-center"},"User Feeds"),e.feeds.length?e.feeds.map((function(t,a){return r.a.createElement("div",{className:"px-8 my-4 py-4 bg-gray-200 rounded-lg shadow-md",key:a},r.a.createElement("div",{className:"mt-2"},r.a.createElement("p",{className:"text-2xl text-gray-700 font-bold"},t.content)),r.a.createElement("div",{className:"flex justify-between items-center mt-4"},r.a.createElement(L.b,{to:"/newsfeed/".concat(e.feedId),className:"text-blue-600 hover:underline"},"Read more"),r.a.createElement("div",null,r.a.createElement("a",{className:"flex items-center",href:"#"},r.a.createElement("img",{className:"mr-3 w-8 h-8 rounded-full",src:"".concat(t.userImage),alt:"avatar"}),r.a.createElement("h1",{className:"text-gray-700 font-bold"},t.username)))))})):r.a.createElement("p",null,"No feeds")))))}))))}));var $=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(L.a,null,r.a.createElement(k.a,null),r.a.createElement(R,null),r.a.createElement(T.c,null,r.a.createElement(T.a,{path:"/",exact:!0,component:z}),r.a.createElement(T.a,{path:"/signup",component:Z}),r.a.createElement(T.a,{path:"/login",component:H}),r.a.createElement(T.a,{path:"/create",component:W}),r.a.createElement(T.a,{path:"/newsfeed/:id",component:Y}),r.a.createElement(T.a,{path:"/profile/:id",component:J}))))},K=Object(c.d)(x,Object(c.a)(u.a,m.a));o.a.render(r.a.createElement(E.a,{store:K},r.a.createElement(r.a.StrictMode,null,r.a.createElement($,null))),document.getElementById("root"))}},[[146,1,2]]]);
//# sourceMappingURL=main.be7fabf0.chunk.js.map